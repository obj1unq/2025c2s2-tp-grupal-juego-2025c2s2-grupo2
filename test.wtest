import extras.*
import wollok.game.*
import elementos.*
import molly.*


describe "Test de comidas" {
    const manzana1 = new Comida(tipo = manzana, position = game.at(14, 10))
    const sandia1 = new Comida(tipo = sandia, position = game.at(15, 10))
    const zanahoria1 = new Comida(tipo = zanahoria, position = game.at(16, 10))
    
    test "la comida tiene gravedad" {
        assert.equals(10, manzana1.position().y())
        manzana1.descender()
        assert.that(manzana1.position().y() < 10)

        assert.equals(10, sandia1.position().y())
        sandia1.descender()
        assert.that(sandia1.position().y() < 10)

        assert.equals(10, zanahoria1.position().y())
        zanahoria1.descender()
        assert.that(zanahoria1.position().y() < 10)
    }

    test "la comida al explotar suma puntos" {
        manzana1.explotar()
        assert.equals(10, molly.puntos())
        sandia1.explotar()
        assert.equals(40, molly.puntos())
        zanahoria1.explotar()
        assert.equals(60, molly.puntos())
    }

    test "la comida se puede lanzar y frena en el borde" {
        manzana1.mover(der)
        assert.equals(15, manzana1.position().x())
        manzana1.mover(izq)
        assert.equals(14, manzana1.position().x())
        manzana1.position(126)
        assert.throwsException({ manzana1.mover(der) })
    }
}